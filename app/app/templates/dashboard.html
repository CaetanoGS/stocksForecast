<!DOCTYPE html>
<html lang="en">

<head>
    <title>Forecasts</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="static/css/sidaBar.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>

</head>

<body>

    <nav class="navbar bg-dark navbar-dark">
        <a class="navbar-brand" href="/">
            <img src="static/img/logo.png" width="40px" alt="Logo">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#">
                        <div class="row">
                            <div class="col">
                                <label for="example-date-input" class="col-2 col-form-label">Date</label>
                                <input required class="form-control" type="date" value="2011-08-19"
                                    id="beginDate">
                            </div>

                            <div class="col">
                                <label for="example-date-input" class="col-2 col-form-label">Date</label>
                                <input required class="form-control" type="date" value="2011-08-19"
                                    id="endDate">
                            </div>
                        </div>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">
                        <div class="row">
                            <div class="col">
                                <label for="example-date-input" class="col-2 col-form-label">Company</label>
                                <input required class="form-control" type="text" value="AAPL" id="companyName">
                            </div>
                            <div class="col">
                                <label for="exampleSelect1">Example select</label>
                                <select class="form-control" id="period" required>
                                    <option selected>Daily</option>
                                    <option>Weekly</option>
                                    <option>Yearly</option>
                                </select>
                            </div>
                        </div>
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="card-deck">
            <div class="card text-center">
                <div class="card-block">

                    <div id='myDiv'></div>

                </div>
            </div>
        </div>
        <div class="card-deck mt-4">
            <div class="card text-center">
                <div class="card-block">
                    <div id='myDiv1'></div>
                </div>
            </div>

            <div class="card text-center">
                <div class="card-block">
                    <div id='myDiv2'></div>
                </div>
            </div>

        </div>
    </div>

    <script>
        document.getElementById('period').addEventListener('change', function(){
            console.log(document.getElementById('period').value);
        });
    </script>
    <script>
        var trace1 = {

            x: ['2017-01-17', '2017-01-18', '2017-01-19', '2017-01-20', '2017-01-23', '2017-01-24', '2017-01-25', '2017-01-26', '2017-01-27', '2017-01-30', '2017-01-31', '2017-02-01', '2017-02-02', '2017-02-03', '2017-02-06', '2017-02-07', '2017-02-08', '2017-02-09', '2017-02-10'],

            close: [120, 119.989998, 119.779999, 120, 120.080002, 119.970001, 121.879997, 121.940002, 121.949997, 121.629997, 121.349998, 128.75, 128.529999, 129.080002, 130.289993, 131.529999, 132.039993, 132.419998, 132.119995],

            decreasing: { line: { color: '#7F7F7F' } },

            high: [120.239998, 120.5, 120.089996, 120.449997, 120.809998, 120.099998, 122.099998, 122.440002, 122.349998, 121.629997, 121.389999, 130.490005, 129.389999, 129.190002, 130.5, 132.089996, 132.220001, 132.449997, 132.940002],

            increasing: { line: { color: '#17BECF' } },

            line: { color: 'rgba(31,119,180,1)' },

            low: [118.220001, 119.709999, 119.370003, 119.730003, 119.769997, 119.5, 120.279999, 121.599998, 121.599998, 120.660004, 120.620003, 127.010002, 127.779999, 128.160004, 128.899994, 130.449997, 131.220001, 131.119995, 132.050003],

            open: [118.339996, 120, 119.400002, 120.449997, 120, 119.550003, 120.419998, 121.669998, 122.139999, 120.93, 121.150002, 127.029999, 127.980003, 128.309998, 129.130005, 130.539993, 131.350006, 131.649994, 132.460007],

            type: 'candlestick',
            xaxis: 'x',
            yaxis: 'y'
        };

        var data = [trace1];

        var layout = {
            //title: document.getElementById('companyName').value + ' Candlestick',
            dragmode: 'zoom',
            margin: {
                r: 10,
                t: 25,
                b: 40,
                l: 60
            },
            showlegend: false,
            xaxis: {
                autorange: true,
                rangeslider: { range: ['2017-01-17 12:00', '2017-02-10 12:00'] },
                title: 'Date',
                type: 'date'
            },
            yaxis: {
                autorange: true,
                type: 'linear'
            },

            annotations: [
                {
                    x: '2017-01-31',
                    y: 0.9,
                    xref: 'x',
                    yref: 'paper',
                    text: 'largest movement',
                    font: { color: 'magenta' },
                    showarrow: true,
                    xanchor: 'right',
                    ax: -20,
                    ay: 0
                }
            ],

            shapes: [
                {
                    type: 'rect',
                    xref: 'x',
                    yref: 'paper',
                    x0: '2017-01-31',
                    y0: 0,
                    x1: '2017-02-01',
                    y1: 1,
                    fillcolor: '#d3d3d3',
                    opacity: 0.2,
                    line: {
                        width: 0
                    }
                }
            ]
        };

        var config = {responsive: true};

        Plotly.newPlot('myDiv2', data, layout, config);
    </script>

    <script>
        var trace1 = {

            x: ['2017-01-17', '2017-01-18', '2017-01-19', '2017-01-20', '2017-01-23', '2017-01-24', '2017-01-25', '2017-01-26', '2017-01-27', '2017-01-30', '2017-01-31', '2017-02-01', '2017-02-02', '2017-02-03', '2017-02-06', '2017-02-07', '2017-02-08', '2017-02-09', '2017-02-10'],

            close: [120, 119.989998, 119.779999, 120, 120.080002, 119.970001, 121.879997, 121.940002, 121.949997, 121.629997, 121.349998, 128.75, 128.529999, 129.080002, 130.289993, 131.529999, 132.039993, 132.419998, 132.119995],

            decreasing: { line: { color: '#7F7F7F' } },

            high: [120.239998, 120.5, 120.089996, 120.449997, 120.809998, 120.099998, 122.099998, 122.440002, 122.349998, 121.629997, 121.389999, 130.490005, 129.389999, 129.190002, 130.5, 132.089996, 132.220001, 132.449997, 132.940002],

            increasing: { line: { color: '#17BECF' } },

            line: { color: 'rgba(31,119,180,1)' },

            low: [118.220001, 119.709999, 119.370003, 119.730003, 119.769997, 119.5, 120.279999, 121.599998, 121.599998, 120.660004, 120.620003, 127.010002, 127.779999, 128.160004, 128.899994, 130.449997, 131.220001, 131.119995, 132.050003],
            open: [118.339996, 120, 119.400002, 120.449997, 120, 119.550003, 120.419998, 121.669998, 122.139999, 120.93, 121.150002, 127.029999, 127.980003, 128.309998, 129.130005, 130.539993, 131.350006, 131.649994, 132.460007],

            type: 'ohlc',
            xaxis: 'x',
            yaxis: 'y'
        };

        var data = [trace1];

        var layout = {
            //title: document.getElementById('companyName').value + ' OHLC',
            dragmode: 'zoom',
            margin: {
                r: 10,
                t: 25,
                b: 40,
                l: 60
            },
            showlegend: false,
            xaxis: {
                autorange: true,
                rangeslider: { range: ['2017-01-17 12:00', '2017-02-10 12:00'] },
                title: 'Date',
                type: 'date'
            },
            yaxis: {
                autorange: true,
                type: 'linear'
            }
        };

        var config = {responsive: true};

        Plotly.newPlot('myDiv1', data, layout, config);


    </script>


    <script>
        Plotly.d3.csv("https://raw.githubusercontent.com/plotly/datasets/master/finance-charts-apple.csv", function (err, rows) {

            function unpack(rows, key) {
                return rows.map(function (row) { return row[key]; });
            }


            var trace1 = {
                type: "scatter",
                mode: "lines",
                name: 'AAPL High',
                x: unpack(rows, 'Date'),
                y: unpack(rows, 'AAPL.High'),
                line: { color: '#17BECF' }
            }

            var trace2 = {
                type: "scatter",
                mode: "lines",
                name: 'AAPL Low',
                x: unpack(rows, 'Date'),
                y: unpack(rows, 'AAPL.Low'),
                line: { color: '#7F7F7F' }
            }

            var data = [trace1, trace2];

            var layout = {
                //title: document.getElementById('companyName').value + ' Time Series',
            };

            var config = {responsive: true};

            Plotly.newPlot('myDiv', data, layout, config);
        })


    </script>

</body>

</html>